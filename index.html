<!-- Author: Oseni Ridwan | Email: oddbrushstudio@gmail.com -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GeoViz | Geophysical Analysis</title>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Fonts: Poppins for headings, Inter for UI -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <!-- Annotation Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0/dist/chartjs-plugin-annotation.min.js"></script>
</head>
<body>

    <div class="app-layout">
        <!-- Sidebar Controls -->
        <aside class="sidebar">
            <div class="brand">
                <div class="logo-icon">üåç</div>
                <h1>GeoViz</h1>
            </div>
            
            <p class="subtitle">Simple Geophysical Plotter</p>

            <!-- Mode Selector -->
            <div class="mode-toggle">
                <button id="btnVLF" class="mode-btn active" onclick="setMode('vlf')">üì° VLF Survey</button>
                <button id="btnRes" class="mode-btn" onclick="setMode('resistivity')">‚ö° Resistivity</button>
            </div>

            <!-- Configuration Card -->
            <div class="config-card">
                <!-- Dynamic Options Area -->
                <div id="vlfOptions" class="options-group">
                    <label>Color Theme</label>
                    <select id="vlfTheme" class="modern-select" onchange="updatePlot()">
                        <!-- Populated by JS -->
                    </select>
                    
                    <div class="toggle-row">
                        <input type="checkbox" id="khToggle" checked onchange="updatePlot()">
                        <label for="khToggle">Apply Karous-Hjelt Filter</label>
                    </div>
                </div>

                <div id="resOptions" class="options-group" style="display:none;">
                    <label>Array Type</label>
                    <select id="arrayType" class="modern-select" onchange="updatePlot()">
                        <option value="wenner">Wenner (Equal Spacing)</option>
                        <option value="schlumberger">Schlumberger</option>
                        <option value="dipole">Dipole-Dipole</option>
                    </select>

                    <label style="margin-top:10px;">Color Palette</label>
                    <select id="resTheme" class="modern-select" onchange="updatePlot()">
                        <!-- Populated by JS -->
                    </select>
                </div>

                <hr class="divider">

                <label>Chart Title (Optional)</label>
                <input type="text" id="customTitle" class="modern-input" placeholder="e.g. Line 1 Profile" oninput="updatePlot()">
            </div>

            <!-- Data Input Area -->
            <div class="data-card">
                <div class="data-header">
                    <label>Input Data</label>
                    <span id="formatHint" class="badge">Station, InPhase, Quad</span>
                </div>
                <textarea id="dataInput" class="code-editor" placeholder="Paste your data here..."></textarea>
                
                <div class="action-row">
                    <button class="text-btn" onclick="document.getElementById('fileUpload').click()">üìÇ Upload File</button>
                    <input type="file" id="fileUpload" hidden accept=".csv,.txt">
                    <button class="text-btn" onclick="loadRobustSample()">üß™ Load Sample</button>
                </div>
            </div>

            <!-- Primary Action -->
            <button class="primary-btn" onclick="updatePlot()">
                Load Chart üöÄ
            </button>
            
            <button class="secondary-btn" id="dlBtn" onclick="downloadChart()" disabled>
                üì• Download Image
            </button>

            <div class="footer-link">
                <span id="themeToggle" class="theme-icon">üåô Dark Mode</span>
            </div>
        </aside>

        <!-- Main Visualization Area -->
        <main class="main-view">
            <div id="chartContainer" class="chart-wrapper">
                <div id="emptyState" class="empty-state">
                    <div class="empty-icon">üìä</div>
                    <h3>Ready to Visualize</h3>
                    <p>Paste your data or click "Load Sample" to begin.</p>
                </div>
                <canvas id="mainChart"></canvas>
            </div>
            
            <!-- Statistics Bar -->
            <div id="statsBar" class="stats-bar" style="display:none;">
                <!-- Populated by JS -->
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>


